<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Weather</title>
  <base href="/">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>
  <app-root>Loading...</app-root>
</body>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <script src= "app/weather/skycons.js"></script>
    <script src="node_modules/chart.js/src/chart.js"></script>





















  <div class = "subscription" style="width:30%;border-style: solid;border-width:5px;padding:5px;">
    <h3>Subscribe</h3>
  <form>
  <label for = "email">Message</label>
  <textarea id = "ema"></textarea>
  <button id ='submitButton'>Submit</button>
</form>
</div>
  
  <script type = "text/javascript">
    var API_URL = "https://ml39zp39r6.execute-api.us-west-2.amazonaws.com/production/user";
    //var data = document.getElementById('#ema');
    
    $('#submitButton').on('click', function(){
     var data = document.getElementById('#ema');
     var query = API_URL + "?email=" +data;
     window.location.href =query;
    //console.log("data sent to database with query", query);
    //document.write(query);
     /* $.ajax({
        type:'POST',
        url: API_URL,
        data: JSON.stringify({"email": $('#ema').val()}),
        //data: data,
        //dataType: "jsonp",
        contentType: "application/json", 
        //crossDomain: true,
        //headers : {'Access-Control-Allow-Origin': '*','Access-Control-Allow-Methods':'GET'},
        //jsonpCallback: 'callback',
        success: function(data){
          
          document.write("here we are" , data);
        }
      });
      return false*/
    });

        /*    type: 'POST',
        url: API_URL,
        data: JSON.stringify({"email": $('#ema').val()}),
        contentType: "application/json",*/



function callback(json){
  console.log(json);
}


    </script>


    
    <script>
    var skycons = new Skycons({"color": "orange"});
    skycons.add("icon1", Skycons.CLEAR_DAY);
    skycons.add("icon2", Skycons.RAIN);
    skycons.add("icon3", Skycons.CLEAR_DAY);
    skycons.add("icon4", Skycons.CLEAR_DAY);
    skycons.add("icon5", Skycons.CLEAR_DAY);
    skycons.play();
    </script>

  <head>
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">

      // Load the Visualization API and the corechart package.
      google.charts.load('current', {'packages':['corechart']});

      // Set a callback to run when the Google Visualization API is loaded.
      google.charts.setOnLoadCallback(drawChart);

      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
      function drawChart() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'City');
        data.addColumn('number', 'Temperature');
        data.addRows([
          ['Melbourne', 27],
          ['Adelaide', 28],
          ['Brisbane', 31],
          ['Perth', 29],
          ['Sydney', 28]
        ]);

        // Set chart options
        var options = {'title':'Temperature Variation between cities',
                       'width':400,
                       'height':300};

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
  </head>

  <body>
    <!--Div that will hold the pie chart-->
    <div id="chart_div"></div>
  </body>



</html>
